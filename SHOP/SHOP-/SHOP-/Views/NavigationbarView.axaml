<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:SHOP.ViewModels"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:DataType="vm:NavigationBarViewModel"
             x:Class="SHOP.Views.NavigationbarView">
    
    <Design.DataContext>
        <vm:NavigationBarViewModel/>
    </Design.DataContext>

    

   

    <!-- Main Navigation Bar Container using Grid -->
    <Grid Height="60"
          Background="{StaticResource NavBarBackgroundBrush}"
          ColumnDefinitions="Auto, Auto, *, Auto"
          VerticalAlignment="Top">
        <!-- **** REMOVED Grid.Styles block from here **** -->

        <!-- Column 0: App Brand Name -->
        <Button Grid.Column="0" Content="ARNE" FontSize="22" FontWeight="Bold"
                   Foreground="{StaticResource NavBarForegroundBrush}"
                   Margin="15,0" VerticalAlignment="Center"
                   Command="{Binding GoBackHomeCommand}"
                   />

        

        <!-- Column 2: Search Field -->
        <Border Grid.Column="2"
                Background="{StaticResource NavBarControlBackgroundBrush}"
                BorderBrush="{StaticResource NavBarControlBorderBrush}"
                BorderThickness="1"
                CornerRadius="18"
                Height="36"
                MaxWidth="500"
                VerticalAlignment="Center"
                Margin="20,0">
            <Grid ColumnDefinitions="*, Auto">
                <TextBox x:Name="SearchTextBox"
                         Grid.Column="0"
                         Watermark="Search products..."
                         Classes="SearchBox" />

                <Button Grid.Column="1"
                        Content="🔍"
                        Classes="IconButton"
                        Padding="10,0"
                        Margin="0"
                        CornerRadius="0 18 18 0"
                        Command="{Binding SearchProductCommand}"
                        CommandParameter="{Binding Text, ElementName=SearchTextBox}"
                        />
                        
            </Grid>
        </Border>

        <!-- Column 3: Action Buttons (Cart, Home/Login) -->
        <StackPanel Grid.Column="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,15,0">
             <Grid Width="45" Height="40" Margin="5,0">
                 <Button Name="CartButton" Content="🛒" FontSize="16"
                         Classes="IconButton"
                         HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                         Command="{Binding GoToCartCommand}"/>
                 
                 <Border Background="{StaticResource NavBarBadgeBackgroundBrush}"
                         Width="20" Height="20" CornerRadius="10"
                         HorizontalAlignment="Right" VerticalAlignment="Top"
                         Margin="0,-2,-2,0"
                         IsVisible="{Binding }">
                     <TextBlock Text="{Binding }"
                                Foreground="{StaticResource NavBarBadgeForegroundBrush}"
                                HorizontalAlignment="Center" VerticalAlignment="Center"
                                FontSize="11" FontWeight="SemiBold"/>
                 </Border>
             </Grid>
            
        </StackPanel>
    </Grid>
    
</UserControl>
